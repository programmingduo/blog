---
layout: post
title: "linux命令"
description: "用到的linux系统cmd命令"
categories: [environment]
tags: [linux]
redirect_from:
  - /2018/03/24/
---

* Karmdown table of content
{:toc .toc}

# 常用命令

## 新建路径命令：

~~~
mkdir [路径名]
~~~~

# 换源

推荐清华的源

Ubuntu 14.04的软件源配置文件是 /etc/apt/sources.list。将系统自带的该文件做个备份，将该文件替换为下面内容，即可使用 TUNA 的软件源镜像。(其他版本sourcelist 参看 [网页](https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/))

先备份再编辑

> mv /etc/apt/sources.list /etc/apt/sources.list.bakup
> sudo gedit /etc/apt/sources.list


访问源列表里的每个网址，并读取软件列表，然后保存在本地电脑。使用update命令更新。

> sudo apt-get update 

# 配置ls命令下不同文件显示为不同颜色

打开~目录下的文件.bashrc,将原来的部分注释uncomment。或者自行加入如下代码：

~~~
export LS_OPTINOS='--color=auto'
alias ls='ls $LS_OPTIONS'
~~~~

# Unix环境下PS1变量的设置

export PS1="\[\e[31;1m\]\u @ \[\e[34;1m\]\h \[\e[36;1m\]\w \[\e[33;1m\]\t $ \[\e[37;1m\]\n"

效果：

图片2


1. 设置ps1变脸的显示

~~~
    \d ：代表日期，格式为weekday month date，例如："Mon Aug 1"

    \H ：完整的主机名称。例如：我的机器名称为：fc4.linux，则这个名称就是fc4.linux

    \h ：仅取主机的第一个名字，如上例，则为fc4，.linux则被省略

    \t ：显示时间为24小时格式，如：HH：MM：SS

    \T ：显示时间为12小时格式

    \A ：显示时间为24小时格式：HH：MM

    \u ：当前用户的账号名称

    \v ：BASH的版本信息

    \w ：完整的工作目录名称。家目录会以 ~代替

    \W ：利用basename取得工作目录名称，所以只会列出最后一个目录

    \# ：下达的第几个命令

    \$ ：提示字符，如果是root时，提示符为：# ，普通用户则为：$
~~~

2. 设置ps1变量的颜色

我们能够通过配置PS1变量使提示符成为彩色。在PS1中配置字符序列颜色的格式为：
 
\[\e[F;Bm\]


基本上是夹在 "\e["（转义开方括号）和 "m" 之间数字值。假如指定一个以上的数字代码，则用分号将他们分开。
    
其中 F 为字体颜色，编号30~37； B 为背景色，编号40~47。
 
可通过 \e[0m 关闭颜色输出；特别的，当B为1时，将显示加亮加粗的文字，请看下面的颜色表和代码表。
 
颜色表

~~~
    前景 背景 颜色
    ---------------------------------------
    30 40 黑色
    31 41 红色
    32 42 绿色
    33 43 黄色
    34 44 蓝色
    35 45 紫色
    36 46 青色
    37 47 白色
 
    代码 意义
    -------------------------
    0 OFF
    1 高亮显示
    4 underline
    5 闪烁
    7 反白显示
    8 不可见
~~~~~

# vim

## vim 更换sublime 配色

网上下载[monokai.vim](https://github.com/sickill/vim-monokai/blob/master/colors/monokai.vim)并放在~/.vim下的colors文件夹下(没有的话新建一个colors文件夹)； 

然后在~/.vimrc 文件中添加如下代码：

~~~
syntax enable
set background=dark
set t_Co=256
:colorscheme monokai
~~~

首先要注意的是下载之后的文件与你vimrc文件中的名称是否一样。比如我vimrc文件中命令为：

>  :colorscheme molokai

而下载的文件命名为monokai.vim，则需要将其更改为 molokai.vim

如果还不奏效，则需要在molokai.vim文件中添加两行代码：

> set background=dark
> set t_Co=256 "告知molokai，终端支持256色。

图片1
![smiley](\assets\images\usedInBlogs\linux-cmd\1.png)


## vim配置

贴上常用.vimrc文件：

~~~
set tabstop=4 //tab缩进空格数
set shiftwidth=4  //换行时的自动缩进列数以及行选择后，使用 < 或者 > 做缩进时，缩进的列数
set encoding=utf-8
filetype on
set number
set smartindent //智能缩减
set expandtab //将tab换成空格
set cursorline //当前行高亮
set wrap //自动换行

imap { {}<ESC>i<CR><ESC>V<O

syntax enable
:colorscheme monokai

~~~~


## 光标移动及插入

* a → 在光标后插入
* o → 在当前行后插入一个新行
* O → 在当前行前插入一个新行
* cw → 替换从光标所在位置后到一个单词结尾的字符
* $ → 光标移到行尾
* ^ → 光标移到行头
* G → 光标移到文件尾
* gg → 光标移到文件头


## 复制

使用yy复制一行

使用 行数n+yy 复制n行

使用p对复制的行进行粘贴

## 跨文件复制

1、用vim打开一个文件1.txt

2、在普通模式下，输入：":sp"（不含引号）横向切分一个窗口，或者":vsp"纵向切分一个窗口，敲入命令后，你将看到两个窗口打开的是同一个文件

3、在普通模式下，输入：":e 2.txt"，在其中一个窗口里打开另一个文件

4、切换到文件（1.txt）的窗口(ctrl+w)，在普通模式下，把光标移到你需要复制内容的起始行，然后输入你想复制的行的数量（从光标所在行往下计算），在行数后面接着输入yy，这样就将内容复制到临时寄存器里 了（在普通模式下ctrl+w，再按一下w，可以在两个窗口之间切换）

5、切换到目标文件（2.txt）窗口，把光标移到你接收复制内容的起始行，按一下p，就完成复制了。 


## 剪切

使用dd剪切一行

使用行数n+dd 剪切n行

使用p对剪切的行进行粘贴

## 替换

*   :s/from/to/     ：  将当前行中的第一个from，替换成to。如果当前行含有多个from，则只会替换其中的第一个。        
*   :s/from/to/g    ：  将当前行中的所有from都替换成to。        
*   :s/from/to/gc   ：  将当前行中的所有from都替换成to，但是每一次替换之前都会询问请求用户确认此操作。
*   :10,20s/from/to/g   ：  对第10行到第20行的内容进行替换。
*   :1,$s/from/to/g   ：对第一行到最后一行的内容进行替换（即全部文本）。
*   :1,.s/from/to/g     ：  对第一行到当前行的内容进行替换。
*   :.,$s/from/to/g     ：  对当前行到最后一行的内容进行替换。
*   :'a,'bs/from/to/g   ：  对标记a和b之间的行（含a和b所在的行）进行替换。
*   其中a和b是之前用m命令所做的标记。
*   :%s/from/to/g   ：  对所有行的内容进行替换。

注意：这里的from和to都可以是任何字符串，其中from还可以是正则表达式。

## 移动

Vim用数字+G来移动行，比如你要移动到342行，那就是342G

## 多行删除

通过行号确定你要删除的行；命令输入“：32,65d”,回车键，32-65行就被删除了

## 搜索

命令模式下，输入：/字符串

比如搜索user, 输入/user

按下回车之后，可以看到vim已经把光标移动到该字符处和高亮了匹配的字符串

查看下一个匹配，按下n(小写n)

跳转到上一个匹配，按下N（大写N）

## 折叠

可在Vim 配置文件中设置 set fdm=XXX
可直接在文件中使用注释调用vim命令 

:set fdm=XXX

有6种方法来选定折叠：

~~~~
1    manual          手工定义折叠         
2    indent           更多的缩进表示更高级别的折叠         
3    expr              用表达式来定义折叠         
4    syntax           用语法高亮来定义折叠         
5    diff                对没有更改的文本进行折叠         
6    marker           对文中的标志折叠
~~~~~

注意，每一种折叠方式不兼容，如不能既用expr又用marker方式，我主要轮流使用indent和marker方式进行折叠。

使用时，用 set fdm=marker 命令来设置成marker折叠方式（fdm是foldmethod的缩写）。
要使每次打开vim时折叠都生效，则在.vimrc文件中添加设置，如添加：set fdm=syntax，就像添加其它的初始化设置一样。

2. 折叠命令

选取了折叠方式后，我们就可以对某些代码实施我们需要的折叠了，由于我使用indent和marker稍微多一些，故以它们的使用为例：如果使用了indent方式，vim会自动的对大括号的中间部分进行折叠，我们可以直接使用这些现成的折叠成果。

在可折叠处（大括号中间）：

*zc      折叠
*zC     对所在范围内所有嵌套的折叠点进行折叠
*zo      展开折叠
*zO     对所在范围内所有嵌套的折叠点展开
*[z       到当前打开的折叠的开始处。
*]z       到当前打开的折叠的末尾处。
*zj       向下移动。到达下一个折叠的开始处。关闭的折叠也被计入。
*zk      向上移动到前一折叠的结束处。关闭的折叠也被计入。

当使用marker方式时，需要用标计来标识代码的折叠，系统默认是\{\{\{和\}\}\}，最好不要改动

我们可以使用下面的命令来创建和删除折叠：

* zf      创建折叠，比如在marker方式下：                  
         zf56G，创建从当前行起到56行的代码折叠；                  
*          10zf或10zf+或zf10↓，创建从当前行起到后10行的代码折叠。                  
*          10zf-或zf10↑，创建从当前行起到之前10行的代码折叠。                  
*          在括号处zf%，创建从当前行起到对应的匹配的括号上去（（），{}，[]，<>等）。
*  
* zd      删除 (delete) 在光标下的折叠。
*          仅当 'foldmethod' 设为 "manual" 或 "marker" 时有效。
*  
* zD     循环删除 (Delete) 光标下的折叠，即嵌套删除折叠。
*          仅当 'foldmethod' 设为 "manual" 或 "marker" 时有效。
*  
* zE      除去 (Eliminate) 窗口里“所有”的折叠。
*          仅当 'foldmethod' 设为 "manual" 或 "marker" 时有效。

## 连续的十几行到50行内的左右移动：

1. 第m行到第n行右移一个tab
         ：m,n>
2. 第m行到第n行左移一个tab
         ：m,n<


# windows与linux服务器传输文件

windows上下载完整的PuTTy安装包而不仅仅是putty.exe这一个文件。


PuTTy包中包含多个exe文件，有putty和psftp等exe文件。


putty只用于登录linux服务器，在服务器上进行相关操作，没有与自己电脑连接，不能与进行上传下载。


## psftp用于实现本地文件上传下载。

### 1. 启动PSFTP

    在Windows命令提示符中输入：

~~~
    set PATH=C:/PSFTP.exe所在路径;%PATH%
~~~~

　　之后，用psftp登录服务器

~~~
　　psftp username@server.example.com
~~~~

　　也可以直接双击运行psftp.exe，命令提示符中出现以下信息

~~~
	psftp: no hostname specified; use "open host.name" to connect

　　psftp>
~~~~

　　这时用open命令登录服务器

~~~
　　open username@server.example.com
~~~~

### 2. PSFTP

2.1 文件名中有空格时使用双引号

如”space name.txt”

2.2 使用通配符

* 代替任何字串

? 替代一个字母

[abc] 在a b c范围内替代一个字母

[a-z] 在a到z范围内替代一个字母

[^abc] 替代一个字母，不包括a b cmatches a single character that is not a, b, or c.

[-a] 代表连接号（-）

[a^] 代表脱字符号（^）

/ 放在上面的所有通配符之前，以取消其（通配符）涵义

（文件夹名称不支持通配符）

2.3 open, quit, close, help命令

从名字就可以知道它们的作用了。其中quit是关闭PSFTP（bey和exit与quit相同），close是切断连接但不关闭PSFTP。

2.4 cd, pwd, lcd, lpwd命令

你已经知道cd和pwd是干什么的了，它们在远程服务器上工作。lcd和lpwd是在cd和pwd前加了Local，就是本地机器的改变路径和显示路径。也可以用!cd, !pwd来实现lcd, lpwd。

2.5 get, put命令

拿和放，象形命令:)，代表下载和上传。

get something.txt

get something.txt another.txt

上面的代码第一行代表下载something.txt，第二行代表下载something.txt，并重命名为another.txt。上传以此类推

put something.txt

put something.txt another.txt

如果是下载上传文件夹，加上那个递归符号 -r

get -r mydir newname

put -r mydir newname

可以直接输入文件或文件夹的绝对路径下载上传，就不用老打cd, lcd命令了。

2.6 mget, mput, reget，reput命令

可以理解为Multiple get, Multiple put，用来一次下载或上传多个文件和文件夹。除了不可以重命名文件或文件夹，其它参数和get, put一样。

re是resume的简写，那么它们就是续传命令了。

2.7 dir, del, mkdir rmdir命令

dir就是ls；del是rm，但不可以删除文件夹；mkdir还是原来的意思（建立文件夹）；rmdir是删除文件夹（某些服务器不允许删除非空文件夹，得现删除其中的文件才行）。

2.8 chmod命令

其参数u, g, o, a, +, -, r, w, x涵义分别是:

u (the owning user)文档所有者

g (members of the owning group)组成员

o (everybody else - ‘others’)其它所有人

a (‘all’, everyone)所有人

+ 加上（授予）

- 减去（剥夺）

r (permission to read the file)读

w (permission to write to the file)写

x (permission to execute the file）运行

chmod go-rwx,u+w privatefile

上面代码的涵义是剥夺组成员及其它任何人的读写运行权限，授予文件所有者写权限也（也就是私人文档）

chmod a+r public*

上面代码的涵义授予所有人读权限（也就是公开公开公开）

直接用权限数字代码也可以

chmod 640 groupfile1 groupfile2

2.9 mv命令

如果使用mv是更改文件或文件夹名称，也可以使用ren, rename命令

2.10 !命令

在上面的命令前加上叹号!，则在本地机器操作